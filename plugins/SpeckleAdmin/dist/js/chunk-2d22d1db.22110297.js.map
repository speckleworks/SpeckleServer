{"version":3,"sources":["webpack:///./src/views/SigninCallback.vue?267f","webpack:///src/views/SigninCallback.vue","webpack:///./src/views/SigninCallback.vue?55af","webpack:///./src/views/SigninCallback.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","$store","state","isAuth","_v","staticClass","directives","name","rawName","value","showError","expression","_e","model","callback","$$v","_s","errorMessage","staticRenderFns","components","computed","watch","data","server","sslProblem","methods","mounted","$router","push","dispatch","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,GAAG,cAAc,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,eAAe,GAAG,iBAAiB,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,IAAM,GAAG,IAAM,KAAK,CAAGN,EAAIO,OAAOC,MAAMC,OAAsxDL,EAAG,SAAS,CAACA,EAAG,cAAc,CAACJ,EAAIU,GAAG,iCAAiC,GAAr1DN,EAAG,SAAS,CAACO,YAAY,eAAe,CAACP,EAAG,YAAY,CAACQ,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,OAAQf,EAAIgB,UAAWC,WAAW,eAAeN,YAAY,yCAAyCL,MAAM,CAAC,MAAQ,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIU,GAAG,eAAeV,EAAIU,GAAG,KAAKN,EAAG,OAAO,CAACO,YAAY,qBAAqB,CAACX,EAAIU,GAAG,sBAAsB,GAAKV,EAAIgB,UAAyFZ,EAAG,cAAc,CAACO,YAAY,QAAQ,CAACP,EAAG,IAAI,CAACO,YAAY,8BAA8B,CAACP,EAAG,SAAS,CAACO,YAAY,QAAQ,CAACX,EAAIU,GAAG,WAAWV,EAAIU,GAAG,qCAAqC,GAAIV,EAAc,WAAEI,EAAG,IAAI,CAACO,YAAY,WAAW,CAACX,EAAIU,GAAG,yFAAyFN,EAAG,IAAI,CAACJ,EAAIU,GAAG,OAAOV,EAAIU,GAAG,2CAA2CN,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,4GAA4G,OAAS,WAAW,CAACN,EAAIU,GAAG,qCAAqCV,EAAIU,GAAG,6DAA6DN,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,mKAAmK,CAACN,EAAIU,GAAG,WAAWV,EAAIU,GAAG,QAAQN,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,qCAAqC,CAACN,EAAIU,GAAG,eAAeV,EAAIU,GAAG,OAAOV,EAAIkB,KAAKd,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,GAAG,GAAK,YAAY,CAACN,EAAIU,GAAG,qBAAqB,GAA3nCN,EAAG,cAAc,CAACJ,EAAIU,GAAG,qDAAqmCN,EAAG,kBAAkBA,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,UAAU,YAAc,IAAIa,MAAM,CAACJ,MAAOf,EAAa,UAAEoB,SAAS,SAAUC,GAAMrB,EAAIgB,UAAUK,GAAKJ,WAAW,cAAc,CAACjB,EAAIU,GAAG,sCAAsCN,EAAG,MAAM,CAACJ,EAAIU,GAAGV,EAAIsB,GAAGtB,EAAIuB,oBAAoB,IAA8E,IAAI,IAAI,IACloEC,EAAkB,GCiCtB,G,oBAAA,CACEX,KAAM,qBACNY,WAAY,GACZC,SAAU,GACVC,MAAO,GACPC,KALF,WAMI,MAAO,CACLC,OAAQ,KACRN,aAAc,KACdP,WAAW,EACXc,YAAY,IAGhBC,QAAS,GACTC,QAdF,WAcA,WACI,IAAJ,IAAQ,KAAR,oBACM,OAAO/B,KAAKgC,QAAQC,KAAK,KAG3B,IAAJ,qDAEA,oBACA,uCAEA,aACA,UAAQ,EAAR,WACMjC,KAAK6B,YAAa,GAGpB7B,KAAKM,OAAO4B,SAAS,eAAzB,oBACA,gBAEM,EAAN,0FACM,EAAN,+BACM,EAAN,iCACM,EAAN,gCAIM,EAAN,oBAEA,kBACM,QAAN,OACM,EAAN,eACM,EAAN,kBC9EwV,I,YCOpVC,EAAY,eACd,EACArC,EACAyB,GACA,EACA,KACA,WACA,MAIa,aAAAY,E","file":"js/chunk-2d22d1db.22110297.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"align-center\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs11\":\"\",\"md6\":\"\",\"lg6\":\"\"}},[(!_vm.$store.state.isAuth)?_c('v-card',{staticClass:\"elevation-3\"},[_c('v-toolbar',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showError),expression:\"!showError\"}],staticClass:\"title small text-uppercase elevation-0\",attrs:{\"dense\":\"\"}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"lock_open\")]),_vm._v(\" \"),_c('span',{staticClass:\"font-weight-light\"},[_vm._v(\"Finishing up...\")])],1),(!_vm.showError)?_c('v-card-text',[_vm._v(\"\\n          This shouldn't take long.\\n        \")]):_c('v-card-text',{staticClass:\"pt-4\"},[_c('p',{staticClass:\"headline font-weight-light\"},[_c('v-icon',{staticClass:\"pb-1\"},[_vm._v(\"error\")]),_vm._v(\" Oups. Something bad happened :(\")],1),(_vm.sslProblem)?_c('p',{staticClass:\"caption\"},[_vm._v(\"\\n            Your server is not using SSL (i.e, your server url is http and not http\"),_c('b',[_vm._v(\"s\")]),_vm._v(\". Please check the community supported \"),_c('a',{attrs:{\"href\":\"https://discourse.speckle.works/t/speckle-server-debian-9-installation-notes-for-development-machines/344\",\"target\":\"_blank\"}},[_vm._v(\" server deployment instructions\")]),_vm._v(\". If still in trouble, don't hesitate to get in touch on \"),_c('a',{attrs:{\"href\":\"https://speckle-works.slack.com/join/shared_invite/enQtNjY5Mzk2NTYxNTA4LTU4MWI5ZjdhMjFmMTIxZDIzOTAzMzRmMTZhY2QxMmM1ZjVmNzJmZGMzMDVlZmJjYWQxYWU0MWJkYmY3N2JjNGI\"}},[_vm._v(\"slack\")]),_vm._v(\" or \"),_c('a',{attrs:{\"href\":\"https://discourse.speckle.works/\"}},[_vm._v(\"discourse\")]),_vm._v(\".\")]):_vm._e(),_c('v-btn',{attrs:{\"block\":\"\",\"to\":\"/signin\"}},[_vm._v(\"back to signin\")])],1),_c('v-card-actions'),_c('v-alert',{attrs:{\"type\":\"warning\",\"dismissible\":\"\"},model:{value:(_vm.showError),callback:function ($$v) {_vm.showError=$$v},expression:\"showError\"}},[_vm._v(\"\\n          Specifics:\\n          \"),_c('pre',[_vm._v(_vm._s(_vm.errorMessage))])])],1):_c('v-card',[_c('v-card-text',[_vm._v(\"You are already logged in.\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container fluid fill-height>\r\n    <v-layout align-center justify-center>\r\n      <v-flex xs11 md6 lg6>\r\n        <v-card class=\"elevation-3\" v-if='!$store.state.isAuth'>\r\n          <v-toolbar dense class='title small text-uppercase elevation-0' v-show=\"!showError\">\r\n            <v-icon small>lock_open</v-icon>&nbsp;<span class='font-weight-light'>Finishing up...</span>\r\n          </v-toolbar>\r\n          <v-card-text v-if='!showError'>\r\n            This shouldn't take long.\r\n          </v-card-text>\r\n          <v-card-text v-else class='pt-4'>\r\n            <p class='headline font-weight-light'><v-icon class='pb-1'>error</v-icon>&nbsp;Oups. Something bad happened :(</p>\r\n            <p class='caption' v-if='sslProblem'>\r\n              Your server is not using SSL (i.e, your server url is http and not http<b>s</b>. Please check the community supported <a href='https://discourse.speckle.works/t/speckle-server-debian-9-installation-notes-for-development-machines/344' target=\"_blank\"> server deployment instructions</a>. If still in trouble, don't hesitate to get in touch on <a href=\"https://speckle-works.slack.com/join/shared_invite/enQtNjY5Mzk2NTYxNTA4LTU4MWI5ZjdhMjFmMTIxZDIzOTAzMzRmMTZhY2QxMmM1ZjVmNzJmZGMzMDVlZmJjYWQxYWU0MWJkYmY3N2JjNGI\">slack</a> or <a href=\"https://discourse.speckle.works/\">discourse</a>.</p>\r\n            <v-btn block to='/signin'>back to signin</v-btn>\r\n          </v-card-text>\r\n          <v-card-actions>\r\n          </v-card-actions>\r\n          <v-alert v-model=\"showError\" type=\"warning\" dismissible>\r\n            Specifics:\r\n            <pre>{{errorMessage}}</pre>\r\n          </v-alert>\r\n        </v-card>\r\n        <v-card v-else>\r\n          <v-card-text>You are already logged in.</v-card-text>\r\n        </v-card>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport Axios from 'axios'\r\n\r\nexport default {\r\n  name: 'SigninViewCallback',\r\n  components: {},\r\n  computed: {},\r\n  watch: {},\r\n  data( ) {\r\n    return {\r\n      server: null,\r\n      errorMessage: null,\r\n      showError: false,\r\n      sslProblem: false\r\n    }\r\n  },\r\n  methods: {},\r\n  mounted( ) {\r\n    if ( this.$store.state.isAuth === true ) {\r\n      return this.$router.push( '/' )\r\n    }\r\n\r\n    let conn = window.decodeURIComponent( this.$route.query.token )\r\n\r\n    let jwt = conn.split( ':::' )[ 0 ]\r\n    let server = localStorage.getItem( '__tempServer' )\r\n\r\n    let url = new URL( server )\r\n    if ( url.protocol !== \"https\" ) {\r\n      this.sslProblem = true\r\n    }\r\n\r\n    this.$store.dispatch( 'authenticate', { server: server, token: jwt } )\r\n      .then( ( ) => {\r\n\r\n        this.$store.dispatch( 'getStreams', 'omit=objects,layers&isComputedResult=false&sort=updatedAt' )\r\n        this.$store.dispatch( 'getProjects' )\r\n        this.$store.dispatch( 'getProcessors' )\r\n        this.$store.dispatch( 'createClient' )\r\n\r\n\r\n\r\n        this.$router.push( '/' ) // TODO: Check redirect (?)\r\n      } )\r\n      .catch( err => {\r\n        console.log( err )\r\n        this.errorMessage = err\r\n        this.showError = true\r\n      } )\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SigninCallback.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SigninCallback.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SigninCallback.vue?vue&type=template&id=310ad4ec&scoped=true&\"\nimport script from \"./SigninCallback.vue?vue&type=script&lang=js&\"\nexport * from \"./SigninCallback.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"310ad4ec\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}